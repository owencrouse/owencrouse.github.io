<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Animated Classroom</title>
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
        }
        #info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            max-width: 250px;
        }
    </style>
</head>
<body>
    <div id="info">
        <strong>Interactive Classroom</strong><br>
        ‚Ä¢ Click front computer screen to explore<br>
        ‚Ä¢ Click blackboard to get a closer view<br>
        ‚Ä¢ Click filing cabinets for credentials<br>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, classroom;
        let clockObj, fan, door, window1, window2;
        let desks = [];
        let chairs = [];
        let computer, computerScreen;
        let raycaster, mouse;
        let isComputerScreenOpen = false;
        let filingCabinet, drawerTop, drawerMiddle, drawerBottom;
        let openDrawer = null;

        let isZoomedIn = false;
        let cameraAnimating = false;
        let currentView = 'default';
        const defaultCameraPos = { x: 0, y: 4, z: 12 };
        const zoomedCameraPos = { x: 0.4, y: 2.2, z: -4 };
        const blackboardCameraPos = { x: 0, y: 4, z: 1 };

        let hourHand, minuteHand, secondHand;

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x87CEEB);
            scene.fog = new THREE.Fog(0x87CEEB, 30, 60);

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 4, 12);
            camera.lookAt(0, 4, -7.5);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.body.appendChild(renderer.domElement);

            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 15, 10);
            directionalLight.castShadow = true;
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            scene.add(directionalLight);

            createClassroom();

            renderer.domElement.addEventListener('click', onMouseClick);
            window.addEventListener('resize', onWindowResize);

            clockObj = new THREE.Clock();
        }
        
        function createClassroom() {
            classroom = new THREE.Group();

            const floorGeometry = new THREE.BoxGeometry(20, 0.2, 15);
            const floorMaterial = new THREE.MeshStandardMaterial({ color: 0xF0F0F0 });
            const floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.position.y = 0;
            floor.receiveShadow = true;
            classroom.add(floor);

            const wallMaterial = new THREE.MeshStandardMaterial({ color: 0xE3D7CA });
            
            const backWallGeometry = new THREE.BoxGeometry(20, 8, 0.2);
            const backWall = new THREE.Mesh(backWallGeometry, wallMaterial);
            backWall.position.set(0, 4, -7.5);
            backWall.receiveShadow = true;
            classroom.add(backWall);

            const sideWallGeometry = new THREE.BoxGeometry(0.2, 8, 15);
            const leftWall = new THREE.Mesh(sideWallGeometry, wallMaterial);
            leftWall.position.set(-10, 4, 0);
            leftWall.receiveShadow = true;
            classroom.add(leftWall);

            const rightWall = new THREE.Mesh(sideWallGeometry, wallMaterial);
            rightWall.position.set(10, 4, 0);
            rightWall.receiveShadow = true;
            classroom.add(rightWall);

            const ceilingGeometry = new THREE.BoxGeometry(20, 0.2, 15);
            const ceilingMaterial = new THREE.MeshStandardMaterial({ color: 0xFFFFFF });
            const ceiling = new THREE.Mesh(ceilingGeometry, ceilingMaterial);
            ceiling.position.y = 8;
            classroom.add(ceiling);

            filingCabinet = createFilingCabinet();
            filingCabinet.position.set(7, 1, -6);
            classroom.add(filingCabinet);

            const boardGeometry = new THREE.BoxGeometry(6, 3, 0.1);
            const boardMaterial = new THREE.MeshStandardMaterial({ color: 0x2F4F2F });
            const board = new THREE.Mesh(boardGeometry, boardMaterial);
            board.position.set(0, 4, -7.3);
            board.userData.clickable = true;
            board.userData.isBlackboard = true;
            classroom.add(board);

            const canvas = document.createElement('canvas');
            canvas.width = 1024;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');

            ctx.fillStyle = '#2F4F2F';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 55px Sacramento, cursive';
            ctx.textAlign = 'center';
            ctx.fillText("Welcome to Owen Crouse's Classroom", canvas.width / 2, 150);

            ctx.font = '50px Sacramento, cursive';
            ctx.fillText('Access Computer to Learn More', canvas.width / 2, 350);

            ctx.font = '50px Sacramento, cursive';
            ctx.fillText('Open Filing Cabinets to Explore Past Projects', canvas.width / 2, 450);

            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            for (let i = 0; i < 50; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const size = Math.random() * 3;
                ctx.fillRect(x, y, size, size);
            }

            const textTexture = new THREE.CanvasTexture(canvas);
            const textMaterial = new THREE.MeshStandardMaterial({ 
                map: textTexture,
                transparent: true
            });
            const textPlane = new THREE.Mesh(
                new THREE.BoxGeometry(5.8, 2.8, 0.01),
                textMaterial
            );
            textPlane.position.set(0, 4, -7.25);
            classroom.add(textPlane);

            const teacherDesk = createDesk(0x8B4513);
            teacherDesk.position.set(0, 0.1, -5);
            teacherDesk.scale.set(1.5, 1, 1.2);
            classroom.add(teacherDesk);

            //----------------- Desks and Computers ------------------------------------------

            computer = create2000sComputer();
            computer.position.set(0.4, 1.65, -5);
            classroom.add(computer);

            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 4; col++) {
                    const desk = createDesk(0xD2691E);
                    desk.position.set(-6 + col * 4, 0.1, 0 + row * 3);
                    desks.push(desk);
                    classroom.add(desk);

                    const chair = createChair();
                    chair.position.set(-6 + col * 4, 0.1, 1.5 + row * 3);
                    chair.rotation.y = Math.PI;
                    chairs.push(chair);
                    classroom.add(chair);

                    const studentComputer = create2000sComputer();
                    studentComputer.position.set(-6 + col * 4, 1.65, 0 + row * 3);
                    studentComputer.scale.set(0.8, 0.8, 0.8);
                    classroom.add(studentComputer);
                }
            }

            //----------------- Windows ------------------------------------------
            
            // Window 1 with frame and panes
            const window1Group = new THREE.Group();
            
            // Window glass
            const windowGeometry = new THREE.BoxGeometry(2, 3, 0.1);
            const windowMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x87CEEB, 
                transparent: true, 
                opacity: 0.5 
            });
            window1 = new THREE.Mesh(windowGeometry, windowMaterial);
            window1Group.add(window1);
            
            // Window frame (outer)
            const frameMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
            
            // Top frame
            const topFrame = new THREE.Mesh(
                new THREE.BoxGeometry(2.2, 0.1, 0.15),
                frameMaterial
            );
            topFrame.position.y = 1.55;
            window1Group.add(topFrame);
            
            // Bottom frame
            const bottomFrame = new THREE.Mesh(
                new THREE.BoxGeometry(2.2, 0.1, 0.15),
                frameMaterial
            );
            bottomFrame.position.y = -1.55;
            window1Group.add(bottomFrame);
            
            // Left frame
            const leftFrame = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, 3.2, 0.15),
                frameMaterial
            );
            leftFrame.position.x = -1.05;
            window1Group.add(leftFrame);
            
            // Right frame
            const rightFrame = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, 3.2, 0.15),
                frameMaterial
            );
            rightFrame.position.x = 1.05;
            window1Group.add(rightFrame);
            
            // Window panes (dividers)
            const paneMaterial = new THREE.MeshStandardMaterial({ color: 0x654321 });
            
            // Horizontal divider
            const horizontalPane = new THREE.Mesh(
                new THREE.BoxGeometry(2, 0.05, 0.12),
                paneMaterial
            );
            horizontalPane.position.y = 0;
            window1Group.add(horizontalPane);
            
            // Vertical divider
            const verticalPane = new THREE.Mesh(
                new THREE.BoxGeometry(0.05, 3, 0.12),
                paneMaterial
            );
            verticalPane.position.x = 0;
            window1Group.add(verticalPane);
            
            window1Group.position.set(-9.9, 4, -3);
            window1Group.rotation.y = Math.PI / 2;
            classroom.add(window1Group);

            // Window 2 with frame and panes
            const window2Group = new THREE.Group();
            
            // Window glass
            window2 = new THREE.Mesh(windowGeometry, windowMaterial);
            window2Group.add(window2);
            
            // Top frame
            const topFrame2 = new THREE.Mesh(
                new THREE.BoxGeometry(2.2, 0.1, 0.15),
                frameMaterial
            );
            topFrame2.position.y = 1.55;
            window2Group.add(topFrame2);
            
            // Bottom frame
            const bottomFrame2 = new THREE.Mesh(
                new THREE.BoxGeometry(2.2, 0.1, 0.15),
                frameMaterial
            );
            bottomFrame2.position.y = -1.55;
            window2Group.add(bottomFrame2);
            
            // Left frame
            const leftFrame2 = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, 3.2, 0.15),
                frameMaterial
            );
            leftFrame2.position.x = -1.05;
            window2Group.add(leftFrame2);
            
            // Right frame
            const rightFrame2 = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, 3.2, 0.15),
                frameMaterial
            );
            rightFrame2.position.x = 1.05;
            window2Group.add(rightFrame2);
            
            // Horizontal divider
            const horizontalPane2 = new THREE.Mesh(
                new THREE.BoxGeometry(2, 0.05, 0.12),
                paneMaterial
            );
            horizontalPane2.position.y = 0;
            window2Group.add(horizontalPane2);
            
            // Vertical divider
            const verticalPane2 = new THREE.Mesh(
                new THREE.BoxGeometry(0.05, 3, 0.12),
                paneMaterial
            );
            verticalPane2.position.x = 0;
            window2Group.add(verticalPane2);
            
            window2Group.position.set(-9.9, 4, 3);
            window2Group.rotation.y = Math.PI / 2;
            classroom.add(window2Group);

            //----------------- Door ------------------------------------------

            const doorGeometry = new THREE.BoxGeometry(2, 4, 0.1);
            const doorMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
            door = new THREE.Mesh(doorGeometry, doorMaterial);
            door.position.set(9.9, 2, 0);
            door.rotation.y = -Math.PI / 2;
            classroom.add(door);


            //----------------- Fan ------------------------------------------

            fan = new THREE.Group();
            const fanBase = new THREE.Mesh(
                new THREE.CylinderGeometry(0.3, 0.3, 0.5, 16),
                new THREE.MeshStandardMaterial({ color: 0x808080 })
            );
            fan.add(fanBase);

            for (let i = 0; i < 4; i++) {
                const blade = new THREE.Mesh(
                    new THREE.BoxGeometry(2, 0.05, 0.3),
                    new THREE.MeshStandardMaterial({ color: 0x696969 })
                );
                blade.rotation.y = (Math.PI / 2) * i;
                fan.add(blade);
            }
            fan.position.set(0, 7.5, 0);
            classroom.add(fan);

            createPosters();
            scene.add(classroom);
        }


        //----------------- Posters ------------------------------------------

        //can replace images in the posters
        function createPosters() {
            const textureLoader = new THREE.TextureLoader();
            
            // Poster 1 - Math poster on back wall
            const poster1 = new THREE.Mesh(
                new THREE.BoxGeometry(2, 2.5, 0.05),
                new THREE.MeshStandardMaterial({ color: 0xFFFFFF })
            );
            poster1.position.set(-5, 4, -7.4);
            classroom.add(poster1);
            
            // Poster 1 content (with your image)
            const poster1Texture = textureLoader.load('images/good-will-hunting-poster.jpg');
            const poster1Content = new THREE.Mesh(
                new THREE.BoxGeometry(1.8, 2.3, 0.02),
                new THREE.MeshStandardMaterial({ map: poster1Texture })
            );
            poster1Content.position.set(-5, 4, -7.35);
            classroom.add(poster1Content);

            // Poster 2 - Science poster on back wall
            const poster2 = new THREE.Mesh(
                new THREE.BoxGeometry(2, 2.5, 0.05),
                new THREE.MeshStandardMaterial({ color: 0xFFFFFF })
            );
            poster2.position.set(5, 4, -7.4);
            classroom.add(poster2);
            
            const poster2Texture = textureLoader.load('images/GreekHead.jpg');
            const poster2Content = new THREE.Mesh(
                new THREE.BoxGeometry(1.8, 2.3, 0.02),
                new THREE.MeshStandardMaterial({ map: poster2Texture })
            );
            poster2Content.position.set(5, 4, -7.35);
            classroom.add(poster2Content);

            // Poster 3 - Motivational poster on left wall
            const poster3 = new THREE.Mesh(
                new THREE.BoxGeometry(2, 1.5, 0.05),
                new THREE.MeshStandardMaterial({ color: 0xFFFFFF })
            );
            poster3.position.set(-9.9, 5.5, -6);
            poster3.rotation.y = Math.PI / 2;
            classroom.add(poster3);
            
            const poster3Texture = textureLoader.load('images/rome-coloseum.jpg');
            const poster3Content = new THREE.Mesh(
                new THREE.BoxGeometry(1.8, 1.3, 0.02),
                new THREE.MeshStandardMaterial({ map: poster3Texture })
            );
            poster3Content.position.set(-9.85, 5.5, -6);
            poster3Content.rotation.y = Math.PI / 2;
            classroom.add(poster3Content);

            // Poster 4 - Reading poster on left wall
            const poster4 = new THREE.Mesh(
                new THREE.BoxGeometry(2, 1.5, 0.05),
                new THREE.MeshStandardMaterial({ color: 0xFFFFFF })
            );
            poster4.position.set(-9.9, 5.5, 6);
            poster4.rotation.y = Math.PI / 2;
            classroom.add(poster4);
            
            
            const poster4Texture = textureLoader.load('images/bgstreetcars(1).png');
            const poster4Content = new THREE.Mesh(
                new THREE.BoxGeometry(1.8, 1.3, 0.02),
                new THREE.MeshStandardMaterial({ map: poster4Texture })
            );
            poster4Content.position.set(-9.85, 5.5, 6);
            poster4Content.rotation.y = Math.PI / 2;
            classroom.add(poster4Content);

            // Poster 5 - World map on right wall
            const poster5 = new THREE.Mesh(
                new THREE.BoxGeometry(3, 2, 0.05),
                new THREE.MeshStandardMaterial({ color: 0xFFFFFF })
            );
            poster5.position.set(9.9, 4.5, -3);
            poster5.rotation.y = -Math.PI / 2;
            classroom.add(poster5);
            
            const poster5Texture = textureLoader.load('images/tron-motorcycle.jpg');
            const poster5Content = new THREE.Mesh(
                new THREE.BoxGeometry(2.8, 1.8, 0.02),
                new THREE.MeshStandardMaterial({ map: poster5Texture })
            );
            poster5Content.position.set(9.85, 4.5, -3);
            poster5Content.rotation.y = -Math.PI / 2;
            classroom.add(poster5Content);

            // Poster 6 - Alphabet poster on right wall
            const poster6 = new THREE.Mesh(
                new THREE.BoxGeometry(2.5, 1.9, 0.05),
                new THREE.MeshStandardMaterial({ color: 0xFFFFFF })
            );
            poster6.position.set(9.9, 6, 4);
            poster6.rotation.y = -Math.PI / 2;
            classroom.add(poster6);
            
            const poster6Texture = textureLoader.load('images/canadian-flag.png');
            const poster6Content = new THREE.Mesh(
                new THREE.BoxGeometry(2.3, 1.8, 0.02),
                new THREE.MeshStandardMaterial({ map: poster6Texture })
            );
            poster6Content.position.set(9.85, 6, 4);
            poster6Content.rotation.y = -Math.PI / 2;
            classroom.add(poster6Content);


            //----------------- Clock ------------------------------------------

            const clockFrame = new THREE.Mesh(
                new THREE.CylinderGeometry(0.4, 0.4, 0.1, 32),
                new THREE.MeshStandardMaterial({ color: 0x000000 })
            );
            clockFrame.rotation.x = Math.PI / 2;
            clockFrame.position.set(3, 6.5, -7.35);
            classroom.add(clockFrame);

            const clockFace = new THREE.Mesh(
                new THREE.CylinderGeometry(0.35, 0.35, 0.05, 32),
                new THREE.MeshStandardMaterial({ color: 0xFFFFFF })
            );
            clockFace.rotation.x = Math.PI / 2;
            clockFace.position.set(3, 6.5, -7.3);
            classroom.add(clockFace);

            hourHand = new THREE.Mesh(
                new THREE.BoxGeometry(0.05, 0.15, 0.02),
                new THREE.MeshStandardMaterial({ color: 0x000000 })
            );
            hourHand.position.set(3, 6.5, -7.25);
            hourHand.rotation.x = Math.PI / 2;
            classroom.add(hourHand);

            minuteHand = new THREE.Mesh(
                new THREE.BoxGeometry(0.03, 0.25, 0.02),
                new THREE.MeshStandardMaterial({ color: 0x000000 })
            );
            minuteHand.position.set(3, 6.5, -7.24);
            minuteHand.rotation.x = Math.PI / 2;
            classroom.add(minuteHand);

            secondHand = new THREE.Mesh(
                new THREE.BoxGeometry(0.02, 0.28, 0.02),
                new THREE.MeshStandardMaterial({ color: 0xFF0000 })
            );
            secondHand.position.set(3, 6.5, -7.23);
            secondHand.rotation.x = Math.PI / 2;
            classroom.add(secondHand);

            const centerDot = new THREE.Mesh(
                new THREE.CylinderGeometry(0.03, 0.03, 0.02, 16),
                new THREE.MeshStandardMaterial({ color: 0x000000 })
            );
            centerDot.rotation.x = Math.PI / 2;
            centerDot.position.set(3, 6.5, -7.22);
            classroom.add(centerDot);
        }

        function createDesk(color) {
            const desk = new THREE.Group();
            
            const top = new THREE.Mesh(
                new THREE.BoxGeometry(1.5, 0.1, 1),
                new THREE.MeshStandardMaterial({ color: color })
            );
            top.position.y = 1;
            top.castShadow = true;
            desk.add(top);

            const legGeometry = new THREE.BoxGeometry(0.1, 1, 0.1);
            const legMaterial = new THREE.MeshStandardMaterial({ color: color });
            
            const positions = [
                [-0.65, 0.5, -0.4],
                [0.65, 0.5, -0.4],
                [-0.65, 0.5, 0.4],
                [0.65, 0.5, 0.4]
            ];

            positions.forEach(pos => {
                const leg = new THREE.Mesh(legGeometry, legMaterial);
                leg.position.set(...pos);
                leg.castShadow = true;
                desk.add(leg);
            });

            return desk;
        }

        //----------------- Filing Cabinet ------------------------------------------

        function createFilingCabinet() {
            const cabinet = new THREE.Group();

            const body = new THREE.Mesh(
                new THREE.BoxGeometry(1, 2, 0.8),
                new THREE.MeshStandardMaterial({ color: 0x696969 })
            );
            body.castShadow = true;
            cabinet.add(body);

            drawerTop = new THREE.Mesh(
                new THREE.BoxGeometry(0.95, 0.6, 0.75),
                new THREE.MeshStandardMaterial({ color: 0x808080 })
            );
            drawerTop.position.set(0, 0.65, 0);
            drawerTop.castShadow = true;
            drawerTop.userData.clickable = true;
            drawerTop.userData.drawerName = 'top';
            drawerTop.userData.isOpen = false;
            drawerTop.userData.closedZ = 0;
            cabinet.add(drawerTop);

            const handleTop = new THREE.Mesh(
                new THREE.BoxGeometry(0.3, 0.05, 0.05),
                new THREE.MeshStandardMaterial({ color: 0x000000 })
            );
            handleTop.position.set(0, 0.65, 0.4);
            cabinet.add(handleTop);

            drawerMiddle = new THREE.Mesh(
                new THREE.BoxGeometry(0.95, 0.6, 0.75),
                new THREE.MeshStandardMaterial({ color: 0x808080 })
            );
            drawerMiddle.position.set(0, 0, 0);
            drawerMiddle.castShadow = true;
            drawerMiddle.userData.clickable = true;
            drawerMiddle.userData.drawerName = 'middle';
            drawerMiddle.userData.isOpen = false;
            drawerMiddle.userData.closedZ = 0;
            cabinet.add(drawerMiddle);

            const handleMiddle = new THREE.Mesh(
                new THREE.BoxGeometry(0.3, 0.05, 0.05),
                new THREE.MeshStandardMaterial({ color: 0x000000 })
            );
            handleMiddle.position.set(0, 0, 0.4);
            cabinet.add(handleMiddle);

            drawerBottom = new THREE.Mesh(
                new THREE.BoxGeometry(0.95, 0.6, 0.75),
                new THREE.MeshStandardMaterial({ color: 0x808080 })
            );
            drawerBottom.position.set(0, -0.65, 0);
            drawerBottom.castShadow = true;
            drawerBottom.userData.clickable = true;
            drawerBottom.userData.drawerName = 'bottom';
            drawerBottom.userData.isOpen = false;
            drawerBottom.userData.closedZ = 0;
            cabinet.add(drawerBottom);

            const handleBottom = new THREE.Mesh(
                new THREE.BoxGeometry(0.3, 0.05, 0.05),
                new THREE.MeshStandardMaterial({ color: 0x000000 })
            );
            handleBottom.position.set(0, -0.65, 0.4);
            cabinet.add(handleBottom);

            return cabinet;
        }
    
        function toggleDrawer(drawer) {
            [drawerTop, drawerMiddle, drawerBottom].forEach(d => {
                if (d !== drawer && d.userData.isOpen) {
                    d.userData.isOpen = false;
                    d.position.z = d.userData.closedZ;
                }
            });

            drawer.userData.isOpen = !drawer.userData.isOpen;
            
            if (drawer.userData.isOpen) {
                drawer.position.z = drawer.userData.closedZ + 0.5;
                openDrawer = drawer.userData.drawerName;
                showDrawerDocument(drawer.userData.drawerName);
            } else {
                drawer.position.z = drawer.userData.closedZ;
                closeDrawerDocument();
            }
        }

        window.closeDrawerAndOverlay = function(drawerName) {
            closeDrawerDocument();
            if (drawerName === 'top' && drawerTop.userData.isOpen) {
                toggleDrawer(drawerTop);
            } else if (drawerName === 'middle' && drawerMiddle.userData.isOpen) {
                toggleDrawer(drawerMiddle);
            } else if (drawerName === 'bottom' && drawerBottom.userData.isOpen) {
                toggleDrawer(drawerBottom);
            }
        };

        function showDrawerDocument(drawerName) {
            closeDrawerDocument();
            
            const overlay = document.createElement('div');
            overlay.id = 'drawerOverlay';
            overlay.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 700px;
                height: 550px;
                background: white;
                border: 3px solid #333;
                border-radius: 8px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.6);
                z-index: 1000;
                font-family: 'Times New Roman', serif;
                color: #000;
            `;
            //----------------- Inside Drawers ------------------------------------------
            let content = '';
            //Projects
            if (drawerName === 'top') {
                content = `
                    <h2 style="color: #2F4F2F; border-bottom: 2px solid #2F4F2F; padding-bottom: 10px;">üìã Projects & Portfolio</h2>
                    <div style="padding: 20px; line-height: 1.8;">
                        <h3>Firewall + Netfilter</h3>
                        <ul>
                            <li>Developed a packet-filtering firewall to inspect and block traffic at the kernel level.</li>
                            <li>Implemented rules using iptables to control network traffic flow.</li>
                            <li>Analyzed Netfilter hook logic to understand kernel-level packet processing.</li>
                            <li>Built Docker Compose environments to simulate multi-host network topologies.</li>
                        </ul>

                        <h3>Premier League Stat Predictor</h3>
                        <ul>
                            <li>Designed a machine learning pipeline to predict Fantasy Premier League player performance.</li>
                            <li>Engineered advanced features like opponent difficulty modeling and dynamic scoring metrics.</li>
                            <li>Trained and validated XGBoost models; displayed predictions on a dynamic HTML dashboard.</li>
                            <li>Created a modular Jupyter workflow with scraping, feature computation, and model tuning.</li>
                        </ul>

                        <h3>Inventory Web Server</h3>
                        <ul>
                            <li>Built a three-tier inventory management system with secure login, search, update, and delete features.</li>
                            <li>Implemented prepared SQL statements to prevent injection and maintain referential integrity.</li>
                            <li>Developed an interactive JS frontend and PHP backend for real-time MySQL updates.</li>
                        </ul>

                        <h3>Led Distance Display</h3>
                        <ul>
                            <li>Designed and built a multi-modal distance sensing system using Raspberry Pi, integrating an ultrasonic sensor (HC-SR04), servo motor (MG90), analog potentiometer (via PCF8591 ADC), and an 8√ó8 LED matrix (MAX7219).</li>
                            <li>Used RPi.GPIO to read potentiometer input and dynamically control the frequency of ultrasonic measurements by mapping analog values to sensing delay intervals.</li>
                            <li>Calculated object distance using echo pulse timing from the ultrasonic sensor and displayed the result on an 8√ó8 LED matrix.</li>
                        </ul>


                        <h3>3D Interactive Classroom Portfolio </h3>
                        <ul>
                            <li>Built this immersive 3D virtual portfolio using Three.js </li>
                            <li>Has a Windows XP‚Äìstyle UI featuring quick-access icons linking to GitHub and LinkedIn.</li>
                            <li>Engineered raycasting-based interaction and state management for drawer and UI events.</li>
                            <li>Optimized performance using geometry reuse, grouped draw calls, and PCF shadow mapping.</li>
                        </ul>
                    </div>
                `;
                // Education 
            } else if (drawerName === 'middle') {
                content = `
                    <h2 style="color: #1941A5; border-bottom: 2px solid #1941A5; padding-bottom: 10px;">üìö Education & Certifications</h2>
                    <div style="padding: 20px; line-height: 1.8;">
                        <h3>Education:</h3>
                        <p><strong>Bachelor of Science in Computer Science</strong><br>
                        Wilfrid Laurier University, Waterloo, ON<br>
                        <em>September 2021 ‚Äì August 2025</em></p>

                        <h3 style="margin-top: 20px;">Technical Skills:</h3>
                        <ul>
                            <li><strong>Languages:</strong> Java, Python, C/C++, MySQL, JavaScript, HTML/CSS, PHP, VBA, R</li>
                            <li><strong>Developer Tools:</strong> Git, VS Code, Eclipse, Oracle VirtualBox/VMware</li>
                            <li><strong>Libraries:</strong> Pandas, NumPy, nltk</li>
                        </ul>

                        <h3 style="margin-top: 20px;">Related Courses:</h3>
                        <p> Data Structures, Algorithms, Operating Systems, Database Systems, 
                        Computer Networks, Software Engineering, Cryptography, 
                        Computer Security, Theory of Computation, Physical Electronics <p>
                        </p>
                    </div>
                `;
                //work experience 
            } else if (drawerName === 'bottom') {
                content = `
                    <h2 style="color: #8B4513; border-bottom: 2px solid #8B4513; padding-bottom: 10px;">üíº Work Experience</h2>
                    <div style="padding: 20px; line-height: 1.8;">
                        <h3>IT Support Technician</h3>
                        <p><strong>Adiventus</strong> | New Hamburg, ON | <em>Aug 2025 ‚Äì Present</em><br>
                        ‚Ä¢ Diagnosed and resolved hardware and software issues across Windows<br>
                        ‚Ä¢ Installed, updated, and configured applications ensuring compatibility with existing systems.<br>
                        ‚Ä¢ Automated repetitive work using Python and Bash scripts.<br>
                        ‚Ä¢ Designed and maintained small-scale MySQL databases for internal reporting and tracking.<br>
                        </p>
                        

                        <h3 style="margin-top: 20px;">General Labourer</h3>
                        <p><strong>Ghent Landscape</strong> | Petersburg, ON | <em>Apr ‚Äì Sept (2021‚Äì2025)</em><br>
                        ‚Ä¢ Assisted with retaining walls, interlock patios, excavations, and commercial landscaping projects.<br>
                        ‚Ä¢ Operated construction tools and heavy equipment safely and efficiently.<br>
                        ‚Ä¢ Maintained a professional and courteous demeanor when interacting with clients and coworkers.<br>
                        ‚Ä¢ Coordinated with the Foreman to meet project goals and ensure client satisfaction.
                        </p>

                        <h3 style="margin-top: 20px;">Personal Trainer</h3>
                        <p><strong>Wilfrid Laurier University</strong> | Waterloo, ON | <em>Sep 2021 ‚Äì Present</em><br>
                        ‚Ä¢ Scheduled and managed client training sessions collaboratively with facility staff.<br>
                        ‚Ä¢ Assessed clients‚Äô physical conditions and designed personalized workout programs.<br>
                        ‚Ä¢ Ensured proper equipment setup and maintenance for safe, effective workouts.
                        </p>

                        <h3 style="margin-top: 20px;">Retail Associate</h3>
                        <p><strong>Athena Art and Gift Store</strong> | Kitchener, ON | <em>Dec 2016 ‚Äì Aug 2020</em><br>
                        ‚Ä¢ Managed inventory and maintained organized, appealing product displays.<br>
                        ‚Ä¢ Delivered excellent customer service and assisted clients with product inquiries.<br>
                        ‚Ä¢ Processed sales transactions and balanced cash and credit payments accurately.
                        </p>
                    </div>
                `;
            }

            overlay.innerHTML = `
                <div style="background: linear-gradient(180deg, #f0f0f0 0%, #e0e0e0 100%); padding: 15px; border-radius: 5px 5px 0 0; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ccc;">
                    <span style="font-size: 16px; font-weight: bold; color: #333;">üìÅ Filing Cabinet - ${drawerName.charAt(0).toUpperCase() + drawerName.slice(1)} Drawer</span>
                    <button onclick="window.closeDrawerAndOverlay('${drawerName}');" style="background: #FF4444; color: white; border: none; width: 30px; height: 30px; border-radius: 3px; cursor: pointer; font-weight: bold; font-size: 18px;">‚úï</button>
                </div>
                <div style="padding: 30px; height: calc(100% - 80px); overflow-y: auto; background: #fafafa;">
                    ${content}
                </div>
            `;

            document.body.appendChild(overlay);
        }

        function closeDrawerDocument() {
            const overlay = document.getElementById('drawerOverlay');
            if (overlay) {
                overlay.remove();
            }
        }

        //----------------- Chair ------------------------------------------

        function createChair() {
            const chair = new THREE.Group();
            
            const seat = new THREE.Mesh(
                new THREE.BoxGeometry(0.8, 0.1, 0.8),
                new THREE.MeshStandardMaterial({ color: 0x8B4513 })
            );
            seat.position.y = 0.7;
            seat.castShadow = true;
            chair.add(seat);

            const back = new THREE.Mesh(
                new THREE.BoxGeometry(0.8, 0.6, 0.1),
                new THREE.MeshStandardMaterial({ color: 0x8B4513 })
            );
            back.position.set(0, 1.1, -0.35);
            back.castShadow = true;
            chair.add(back);

            const legGeometry = new THREE.BoxGeometry(0.08, 0.7, 0.08);
            const legMaterial = new THREE.MeshStandardMaterial({ color: 0x654321 });
            
            const positions = [
                [-0.3, 0.35, -0.3],
                [0.3, 0.35, -0.3],
                [-0.3, 0.35, 0.3],
                [0.3, 0.35, 0.3]
            ];

            positions.forEach(pos => {
                const leg = new THREE.Mesh(legGeometry, legMaterial);
                leg.position.set(...pos);
                leg.castShadow = true;
                chair.add(leg);
            });

            return chair;
        }

        //----------------- Computer ------------------------------------------

        function create2000sComputer() {
            const comp = new THREE.Group();

            const monitorBack = new THREE.Mesh(
                new THREE.BoxGeometry(0.6, 0.5, 0.6),
                new THREE.MeshStandardMaterial({ color: 0xD3D3D3 })
            );
            monitorBack.castShadow = true;
            comp.add(monitorBack);

            const bezel = new THREE.Mesh(
                new THREE.BoxGeometry(0.62, 0.52, 0.05),
                new THREE.MeshStandardMaterial({ color: 0xC0C0C0 })
            );
            bezel.position.z = 0.325;
            bezel.castShadow = true;
            comp.add(bezel);

            const screenGeometry = new THREE.BoxGeometry(0.5, 0.38, 0.02);
            const screenMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x1a472a,
                emissive: 0x0a1a0a
            });
            computerScreen = new THREE.Mesh(screenGeometry, screenMaterial);
            computerScreen.position.z = 0.36;
            computerScreen.castShadow = true;
            computerScreen.userData.clickable = true;
            computerScreen.userData.isComputerScreen = true;
            comp.add(computerScreen);

            const powerButton = new THREE.Mesh(
                new THREE.CylinderGeometry(0.02, 0.02, 0.01, 16),
                new THREE.MeshStandardMaterial({ color: 0x90EE90, emissive: 0x00FF00 })
            );
            powerButton.rotation.x = Math.PI / 2;
            powerButton.position.set(0.25, -0.22, 0.35);
            comp.add(powerButton);

            const stand = new THREE.Mesh(
                new THREE.CylinderGeometry(0.08, 0.12, 0.15, 16),
                new THREE.MeshStandardMaterial({ color: 0xC0C0C0 })
            );
            stand.position.set(0, -0.325, 0);
            stand.castShadow = true;
            comp.add(stand);

            const keyboard = new THREE.Mesh(
                new THREE.BoxGeometry(0.5, 0.03, 0.2),
                new THREE.MeshStandardMaterial({ color: 0xE8E8E8 })
            );
            keyboard.position.set(0, -0.4, 0.5);
            keyboard.rotation.x = 0.1;
            keyboard.castShadow = true;
            comp.add(keyboard);

            const mouse = new THREE.Mesh(
                new THREE.SphereGeometry(0.04, 16, 16),
                new THREE.MeshStandardMaterial({ color: 0xD3D3D3 })
            );
            mouse.scale.set(1, 0.6, 1.2);
            mouse.position.set(0.35, -0.39, 0.5);
            mouse.castShadow = true;
            comp.add(mouse);

            return comp;
        }

        function onMouseClick(event) {
            // Prevent clicking through overlays
            if (document.getElementById('computerOverlay') || document.getElementById('drawerOverlay')) {
                return;
            }

            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(scene.children, true);

            for (let intersect of intersects) {
                if (intersect.object.userData.clickable) {
                    if (intersect.object.userData.isComputerScreen) {
                        toggleComputerScreen();
                        break;
                    } else if (intersect.object.userData.isBlackboard) {
                        toggleBlackboardView();
                        break;
                    } else if (intersect.object.userData.drawerName) {
                        toggleDrawer(intersect.object);
                        break;
                    }
                }
            }
        }

        function toggleBlackboardView() {
            if (currentView === 'blackboard') {
                currentView = 'default';
                cameraAnimating = true;
            } else {
                currentView = 'blackboard';
                cameraAnimating = true;
            }
        }

        function toggleComputerScreen() {
            isComputerScreenOpen = !isComputerScreenOpen;
            cameraAnimating = true;

            if (isComputerScreenOpen) {
                currentView = 'computer';
                computerScreen.material.color.setHex(0x5A9FD4);
                computerScreen.material.emissive.setHex(0x0066CC);
                
                setTimeout(() => {
                    createComputerUI();
                }, 800);
            } else {
                currentView = 'default';
                computerScreen.material.color.setHex(0x1a472a);
                computerScreen.material.emissive.setHex(0x0a1a0a);
                
                removeComputerUI();
            }
        }

        function createComputerUI() {
            
            const overlay = document.createElement('div');
            overlay.id = 'computerOverlay';
            overlay.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 600px;
                height: 450px;
                background: linear-gradient(180deg, #0054A6 0%, #0072C6 10%, #0072C6 90%);
                border: 3px solid #C0C0C0;
                border-radius: 8px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.5);
                z-index: 1000;
                font-family: 'Trebuchet MS', sans-serif;
                color: white;
            `;

            overlay.innerHTML = `
                <div style="background: linear-gradient(180deg, #245EDC 0%, #1941A5 100%); padding: 8px; border-radius: 5px 5px 0 0; display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 14px; font-weight: bold;">ü™ü Windows XP - My Computer</span>
                    <button onclick="document.getElementById('computerOverlay').remove(); toggleComputerScreen();" style="background: #FF4444; color: white; border: none; width: 24px; height: 24px; border-radius: 3px; cursor: pointer; font-weight: bold;">‚úï</button>
                </div>
                <div style="padding: 20px; height: calc(100% - 100px); overflow-y: auto;">
                    <h2 style="margin-top: 0; font-size: 20px;">üìÅ My Documents</h2>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px;">
                        <a href="resume.html" target="_blank" style="text-decoration: none; color: white;">
                            <div style="text-align: center; cursor: pointer; padding: 10px; border-radius: 5px; background: rgba(255,255,255,0.1);" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                                <img src="images/resume_img.png" style="width: 40px; height: 40px; object-fit: contain;" onerror="this.outerHTML='<div style=\\'font-size: 40px;\\'>üìÑ</div>'">
                                <div style="font-size: 12px; margin-top: 5px;">Resume</div>
                            </div>
                        </a>
                        <a href="https://github.com/owencrouse" target="_blank" style="text-decoration: none; color: white;">
                            <div style="text-align: center; cursor: pointer; padding: 10px; border-radius: 5px; background: rgba(255,255,255,0.1);" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                                <img src="images/github_img.webp" style="width: 40px; height: 40px; object-fit: contain;" onerror="this.outerHTML='<div style=\\'font-size: 40px;\\'>üêô</div>'">
                                <div style="font-size: 12px; margin-top: 5px;">GitHub</div>
                            </div>
                        </a>
                        <a href="https://www.linkedin.com/in/owen-crouse-821989318" target="_blank" style="text-decoration: none; color: white;">
                            <div style="text-align: center; cursor: pointer; padding: 10px; border-radius: 5px; background: rgba(255,255,255,0.1);" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                                <img src="images/linkedin_img.png" style="width: 40px; height: 40px; object-fit: contain;" onerror="this.outerHTML='<div style=\\'font-size: 40px;\\'>üíº</div>'">
                                <div style="font-size: 12px; margin-top: 5px;">LinkedIn</div>
                            </div>
                        </a>
                        <a href="mailto:owencrouse2003@gmail.com" style="text-decoration: none; color: white;">
                            <div style="text-align: center; cursor: pointer; padding: 10px; border-radius: 5px; background: rgba(255,255,255,0.1);" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                                <img src="images/gmail_img.png" style="width: 40px; height: 40px; object-fit: contain;" onerror="this.outerHTML='<div style=\\'font-size: 40px;\\'>üìß</div>'">
                                <div style="font-size: 12px; margin-top: 5px;">Email</div>
                            </div>
                        </a>
                        <a href="loadingscreen.html" target="_blank" style="text-decoration: none; color: white;">
                            <div style="text-align: center; cursor: pointer; padding: 10px; border-radius: 5px; background: rgba(255,255,255,0.1);" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                                <img src="images/tech-learn.png" style="width: 40px; height: 40px; object-fit: contain;" onerror="this.outerHTML='<div style=\\'font-size: 40px;\\'>üíª</div>'">
                                <div style="font-size: 12px; margin-top: 5px;">Learn about Tech</div>
                            </div>
                        </a>
                        <a href="images/Student_Transcript.pdf" target="_blank" style="text-decoration: none; color: white;">
                            <div style="text-align: center; cursor: pointer; padding: 10px; border-radius: 5px; background: rgba(255,255,255,0.1);" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                                <img src="images/resume_img.png" style="width: 40px; height: 40px; object-fit: contain;" onerror="this.outerHTML='<div style=\\'font-size: 40px;\\'>üìÑ</div>'">
                                <div style="font-size: 12px; margin-top: 5px;">Transcript</div>
                            </div>
                        </a>
                    </div>
                </div>
                <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 40px; background: linear-gradient(180deg, #1941A5 0%, #0F2B6B 100%); border-radius: 0 0 5px 5px; display: flex; align-items: center; padding: 0 10px; gap: 10px;">
                    <button style="background: linear-gradient(180deg, #3CA03C 0%, #2D8B2D 100%); color: white; border: 1px solid #1A5E1A; padding: 5px 15px; border-radius: 3px; cursor: pointer; font-weight: bold;">ü™ü Start</button>
                    <div style="flex: 1; background: rgba(0,0,0,0.2); height: 30px; border-radius: 3px;"></div>
                    <div style="font-size: 12px;">üîä üîã 12:34 PM</div>
                </div>
            `;

            document.body.appendChild(overlay);
        }

        function removeComputerUI() {
            const overlay = document.getElementById('computerOverlay');
            if (overlay) {
                overlay.remove();
            }
        }

        //----------------- Animations ------------------------------------------

        function animate() {
            requestAnimationFrame(animate);

            const elapsed = clockObj.getElapsedTime();

            const now = new Date();
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            if (secondHand) {
                secondHand.rotation.z = -(seconds * Math.PI / 30);
            }
            if (minuteHand) {
                minuteHand.rotation.z = -(minutes * Math.PI / 30 + seconds * Math.PI / 1800);
            }
            if (hourHand) {
                hourHand.rotation.z = -(hours * Math.PI / 6 + minutes * Math.PI / 360);
            }

            if (fan) {
                fan.rotation.y += 0.05;
            }

            if (window1 && window2) {
                const pulse = Math.sin(elapsed * 2) * 0.1 + 0.5;
                window1.material.opacity = pulse;
                window2.material.opacity = pulse;
            }

            desks.forEach((desk, i) => {
                desk.position.y = 0.1 + Math.sin(elapsed + i * 0.5) * 0.02;
            });

            chairs.forEach((chair, i) => {
                chair.rotation.z = Math.sin(elapsed * 0.5 + i * 0.3) * 0.01;
            });

            if (cameraAnimating) {
                let targetPos, targetLookAt;
                
                if (currentView === 'computer') {
                    targetPos = zoomedCameraPos;
                    targetLookAt = { x: 0.4, y: 1.8, z: -5 };
                } else if (currentView === 'blackboard') {
                    targetPos = blackboardCameraPos;
                    targetLookAt = { x: 0, y: 4, z: -7.5 };
                } else {
                    targetPos = defaultCameraPos;
                    targetLookAt = { x: 0, y: 4, z: -7.5 };
                }
                
                camera.position.x += (targetPos.x - camera.position.x) * 0.05;
                camera.position.y += (targetPos.y - camera.position.y) * 0.05;
                camera.position.z += (targetPos.z - camera.position.z) * 0.05;
                
                const lookAtTarget = new THREE.Vector3(targetLookAt.x, targetLookAt.y, targetLookAt.z);
                camera.lookAt(lookAtTarget);
                
                const distance = Math.sqrt(
                    Math.pow(targetPos.x - camera.position.x, 2) +
                    Math.pow(targetPos.y - camera.position.y, 2) +
                    Math.pow(targetPos.z - camera.position.z, 2)
                );
                if (distance < 0.01) {
                    cameraAnimating = false;
                }
            } else {
                camera.lookAt(0, 4, -7.5);
            }

            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        init();
        animate();
    </script>
</body>
</html>